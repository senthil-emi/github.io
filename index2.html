<!DOCTYPE html>
<html>
<head>
    <title>Custom Tabs Test</title>
</head>
<body>
    <h1>Custom Tabs Two-Way Communication</h1>
    <p id="status">Waiting for message from App...</p>
    <div id="log" style="border:1px solid #ccc; padding:10px; margin-top:10px;"></div>

    <script>
        // 1. Listen for messages from the Android App
        window.addEventListener("message", function(event) {
            const logDiv = document.getElementById("log");
            const status = document.getElementById("status");

            // Display the received message
            status.innerText = "Message Received!";
            logDiv.innerHTML += `<p style="color:blue;"><b>App said:</b> ${event.data}</p>`;

            // 2. The "Ping-Pong" Reply
            // event.source is the bridge back to your Android App
            if (event.source) {
                const reply = "Pong! I received: " + event.data;
                event.source.postMessage(reply, event.origin);
                logDiv.innerHTML += `<p style="color:green;"><b>Web replied:</b> ${reply}</p>`;
            }
        }, false);
    </script>
</body>
</html>
